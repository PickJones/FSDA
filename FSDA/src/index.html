<!DOCTYPE html>
<html>
<head>
<!--script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script-->
<!--script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script-->
<script src="jquery-3.1.1.js"></script>
<script>
  $(function() {
    $('#srchbox').keyup(function() { doSearch(document.getElementById('srchbox').value); });
    $('#rankcsv').bind('change', doSomething);
  });
  function doSomething(f) {
$('#output').append('doSomething('+f+')<br>');
    var files = f.target.files;
    var file = files[0];
$('#output').append(file.fileName + "<br>");
    var reader = new FileReader();
    reader.readAsText(file);
$('#output').append('readAsText<br>');
    reader.onload = function(event) {
$('#output').append('onload<br>');
      var csv = event.target.result;
$('#output').append('csv<br>');
      //var data = $.csv.toArrays(csv);
      var data = $.csv.toArrays('a,b,c,d,e,f');
$('#output').append('data<br>');
      var html = '';
$('#output').append('row in data<br>');
      for (var row in data) {
$('#output').append('row' + row + '<br>');
        for (var item in data[row]) {
$('#output').append('item' + item + '<br>');
          html += '::' + data[row][item]+'::'
        }
        html += '<br>';
      }
      $('#outputcsv').html(html);
    };
    reader.onerror = function() { alert('Unable to read ' + file.fileName); };
  }
  function doSearch(s) {
    if (event.keyCode == 13) {
      srchterm="";
      $('#srchbox').val(srchterm);
    } else {
      srchterm = s;
    }
    if (srchterm.length > 0) {
      icons="<img src=\"../img/x.png\" height=\"15\" width=\"15\" onclick=\"clearSearchBox()\">&nbsp;&nbsp;";
      icons+="<img src=\"../img/check.png\" height=\"15\" width=\"15\" onclick=\"clearSearchBox()\">&nbsp;&nbsp;";
      icons+="<img src=\"../img/clear.jpg\" height=\"15\" width=\"15\" onclick=\"clearSearchBox()\">&nbsp;&nbsp;";
    } else {
      icons="";
    }
    $('#tmp').html(icons + srchterm);
  }
  function clearSearchBox() {
    $('#srchbox').val('');
    doSearch('');
    $('#srchbox').focus();
  }
  function resetConfirmation() {
    $('#confirm').html("<br><button onclick=\"doReset()\">Confirm</button><button onclick=\"cancelReset()\">Cancel</button>");
  }
  function cancelReset() {
    $('#confirm').empty();
  }
  function doReset() {
    $('#confirm').empty();
  }
</script>
</head>
<body>
  <input type="file" name="rankcsv" id="rankcsv">
  <button name="nothing" onclick="document.getElementById('output').innerHTML += 'nothing<br>'">Nothing</button>
  <hr>
  <table id="input" width="100%">
    <tr>
      <td>
        <input type="text" name="srchbox" id="srchbox" size=50>
      </td><td align="right">
        <button onclick="resetConfirmation()">Reset</button>
        <div id="confirm"></div>
      </td>
    </tr>
  </table>
  <hr>
  <table id="searchResults">
  </table>
  <hr>
  <table id="topPicks">
  </table>
  <hr>
  <table id="myTeam">
  </table>
  <hr>
  <table id="availP">
  </table>
  <hr>
  <table id="takenP">
  </table>
  <hr>
  <table border="1"><tr><td>
  <b>output</b><br>
  <div id="output"></div>
  </td><td>
  <b>tmp</b><br>
  <div id="tmp"></div>
  </td><td>
  <b>tbd</b><br>
  <div id="tbd"></div>
  </td></tr></table>
</body>
</html>
